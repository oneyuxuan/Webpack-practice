!function(t){var i={};function e(r){if(i[r])return i[r].exports;var a=i[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)e.d(r,a,function(i){return t[i]}.bind(null,a));return r},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=1)}([function(t,i,e){e(1);var r=document.getElementById("canvas1"),a=r.getContext("2d"),n=document.getElementById("canvas2"),s=n.getContext("2d"),o={imgUrl:"./images/",can1:r,ctx1:a,can2:n,ctx2:s,canWid:r.width,canHei:r.height,mx:.5*r.width,my:.5*r.height,aneOb:{},fruitOb:{},momOb:{},babyOb:{},scoreOb:{},waveOb:{},haloOb:{},dustOb:{},diffframetime:0};t.exports={imgUrl:o.imgUrl,can1:o.can1,ctx1:o.ctx1,can2:o.can2,ctx2:o.ctx2,canWid:o.canWid,canHei:o.canHei,mx:o.mx,my:o.my,aneOb:o.aneOb,fruitOb:o.fruitOb,momOb:o.momOb,babyOb:o.babyOb,scoreOb:o.scoreOb,waveOb:o.waveOb,haloOb:o.haloOb,dustOb:o.dustOb,diffframetime:o.diffframetime}},function(t,i,e){var r=e(3);e(12),r.startgame()},function(t,i,e){e(1),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,i){return window.setTimeout(t,1e3/60)},t.exports={calLength2:function(t,i,e,r){return Math.sqrt(Math.pow(t-e,2)+Math.pow(i-r,2))},lerpAngle:function(t,i,e){var r=i-t;return r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI),t+r*e},lerpDistance:function(t,i,e){return t+(i-t)*e},distance:function(t,i,e,r,a){var n=Math.abs(t-e),s=Math.abs(i-r);return n<a&&s<a}}},function(t,i,e){var r,a,n,s,o,h,m,u,d,y=e(0),b=e(2),f=e(4),l=e(5),c=e(6),x=e(7),p=e(8),g=e(9),v=e(10),w=e(11),I=y.can1,O=y.ctx1,T=y.ctx2,E=y.canWid,A=y.canHei,M=b.calLength2,B={startgame:function(){B.init(),d=Date.now(),B.gameLoop()},drawBackgorund:function(){var t=new Image;t.src=y.imgUrl+"background.jpg",T.drawImage(t,0,0,E,A)},init:function(){O.fillStyle="white",O.font="20px 微软雅黑",O.textAlign="center",I.addEventListener("mousemove",B.onMouseMove,!1),I.addEventListener("click",B.onClick,!1),y.mx=.5*E,y.my=.5*A,(r=y.aneOb=new f).init(),(a=y.fruitOb=new x).init(),(n=y.momOb=new g).init(),(s=y.babyOb=new l).init(),o=y.scoreOb=new v,(h=y.waveOb=new w).init(),(m=y.haloOb=new p).init(),(u=y.dustOb=new c).init()},gameLoop:function(){requestAnimFrame(B.gameLoop);var t=Date.now();y.diffframetime=t-d,d=t,40<y.diffframetime&&(y.diffframetime=40),T.clearRect(0,0,E,A),B.drawBackgorund(),r.drawAne(),a.computeFruit(),a.drawFruit(),O.clearRect(0,0,E,A),n.drawMom(),s.drawBaby(),o.gameOver||(B.momEatFruit(),B.momFoodBaby()),o.drawScore(),h.drawWave(),m.drawHalo(),u.drawDust()},onMouseMove:function(t){o.gameOver||(t.offsetX||t.layerX)&&(y.mx=null==t.offsetX?t.layerX:t.offsetX,y.my=null==t.offsetY?t.layerY:t.offsetY)},onClick:function(){o.gameOver&&(o.gameOver=!1,a.init(),n.init(),s.init(),o.init())},momEatFruit:function(){for(var t=0;t<a.num;t++)a.alive[t]&&a.grow[t]&&M(a.x[t],a.y[t],n.x,n.y)<30&&(a.dead(t),h.born(t),o.fruitNum++,n.momBodyIndex=7==n.momBodyIndex?n.momBodyIndex:n.momBodyIndex+1,"blue"==a.type[t]&&o.doubleNum++)},momFoodBaby:function(){if(0<o.fruitNum&&M(n.x,n.y,s.x,s.y)<30){m.born(),n.momBodyIndex=0;var t=o.doubleNum*o.fruitNum,i=s.babyBodyIndex-t;i<0&&(i=0);var e=o.strength+(i/2).toFixed(0);10<e&&(e=10),o.strength=e,s.babyBodyIndex=i,o.computeScore()}}};t.exports=B},function(t,i,e){function r(){this.num=50,this.rootx=[],this.headx=[],this.heady=[],this.amp=[],this.beta=0}var a=e(0),n=a.ctx2,s=a.canHei;r.prototype.init=function(){for(var t=0;t<this.num;t++)this.rootx[t]=18*t+30*Math.random(),this.headx[t]=this.rootx[t],this.heady[t]=s-220+50*Math.random(),this.amp[t]=50*Math.random()+60},r.prototype.drawAne=function(){this.beta+=8e-4*a.diffframetime;var t=Math.sin(this.beta);n.save(),n.globalAlpha=.7,n.lineWidth=20,n.lineCap="round",n.strokeStyle="#3b154e";for(var i=0;i<this.num;i++){var e=this.headx[i]+t*this.amp[i];n.beginPath(),n.moveTo(this.rootx[i],s),n.quadraticCurveTo(this.rootx[i],s-100,e,this.heady[i]),n.stroke()}n.restore()},t.exports=r},function(t,i,e){function r(){this.x=0,this.y=0,this.angle,this.babyTailArr=[],this.babyTailTimer=0,this.babyTailIndex=0,this.babyEyeArr=[],this.babyEyeTimer=0,this.babyEyeIndex=0,this.babyEyeInterval=1e3,this.babyBodyArr=[],this.babyBodyTimer=0,this.babyBodyIndex=0}var a=e(0),n=e(2),s=a.imgUrl,o=a.ctx1,h=a.can1,m=a.canWid,u=a.canHei,d=n.lerpAngle,y=n.lerpDistance;r.prototype.init=function(){this.x=.5*m-50,this.y=.5*u+50,this.babyBodyIndex=0;for(var t=this.angle=0;t<8;t++)this.babyTailArr[t]=new Image,this.babyTailArr[t].src=s+"babyTail"+t+".png";for(t=0;t<2;t++)this.babyEyeArr[t]=new Image,this.babyEyeArr[t].src=s+"babyEye"+t+".png";for(t=0;t<20;t++)this.babyBodyArr[t]=new Image,this.babyBodyArr[t].src=s+"babyFade"+t+".png"},r.prototype.drawBaby=function(){var t=a.momOb,i=a.scoreOb;this.x=y(t.x,this.x,.98),this.y=y(t.y,this.y,.99);var e=t.x-this.x,r=t.y-this.y,n=Math.atan2(r,e)+Math.PI;this.angle=d(n,this.angle,.6),this.babyTailTimer+=a.diffframetime,50<this.babyTailTimer&&(this.babyTailIndex=(this.babyTailIndex+1)%8,this.babyTailTimer%=50),this.babyEyeTimer+=a.diffframetime,this.babyEyeTimer>this.babyEyeInterval&&(this.babyEyeIndex=(this.babyEyeIndex+1)%2,this.babyEyeTimer%=this.babyEyeInterval,0==this.babyEyeIndex?this.babyEyeInterval=1500*Math.random()+1500:this.babyEyeInterval=200),this.babyBodyTimer+=a.diffframetime,550<this.babyBodyTimer&&(this.babyBodyIndex+=1,this.babyBodyTimer%=550,i.strength=((20-this.babyBodyIndex)/2).toFixed(0),19<this.babyBodyIndex&&(this.babyBodyIndex=19,i.gameOver=!0,h.style.cursor="pointer")),o.save(),o.translate(this.x,this.y),o.rotate(this.angle);var s=this.babyTailArr[this.babyTailIndex];o.drawImage(s,.5*-s.width+24,.5*-s.height);var m=this.babyBodyArr[this.babyBodyIndex];o.drawImage(m,.5*-m.width,.5*-m.height);var u=this.babyEyeArr[this.babyEyeIndex];o.drawImage(u,.5*-u.width,.5*-u.height),o.restore()},t.exports=r},function(t,i,e){function r(){this.num=30,this.dustPic=[],this.x=[],this.y=[],this.amp=[],this.index=[],this.beta=0}var a=e(0),n=a.ctx1,s=a.imgUrl,o=a.canWid,h=a.canHei;r.prototype.init=function(){for(var t=0;t<7;t++)this.dustPic[t]=new Image,this.dustPic[t].src=s+"dust"+t+".png";for(t=0;t<this.num;t++)this.x[t]=Math.random()*o,this.y[t]=Math.random()*h,this.amp=20+Math.random()+15,this.index[t]=Math.floor(7*Math.random())},r.prototype.drawDust=function(){for(var t=0;t<this.num;t++){var i=this.index[t];n.drawImage(this.dustPic[i],this.x,this.y)}},t.exports=r},function(t,i,e){function r(){this.num=30,this.x=[],this.y=[],this.size=[],this.type=[],this.speed=[],this.grow=[],this.alive=[],this.orange=new Image,this.blue=new Image}var a=e(0),n=a.ctx2,s=a.imgUrl;r.prototype.init=function(){this.orange.src=s+"fruit.png",this.blue.src=s+"blue.png";for(var t=0;t<this.num;t++)this.x[t]=this.y[t]=0,this.speed[t]=.015*Math.random()+.005,this.alive[t]=!1,this.grow[t]=!1,this.type[t]=""},r.prototype.drawFruit=function(){for(var t=0;t<this.num;t++)if(this.alive[t]){this.size[t]<=16?(this.grow[t]=!1,this.size[t]+=this.speed[t]*a.diffframetime*.8):(this.grow[t]=!0,this.y[t]-=5*this.speed[t]*a.diffframetime);var i=this.orange;"blue"==this.type[t]&&(i=this.blue),n.drawImage(i,this.x[t]-.5*this.size[t],this.y[t]-.5*this.size[t],this.size[t],this.size[t]),this.y[t]<8&&(this.alive[t]=!1)}},r.prototype.born=function(t){var i=a.aneOb,e=Math.floor(Math.random()*i.num);this.x[t]=i.headx[e],this.y[t]=i.heady[e],this.size[t]=0,this.alive[t]=!0;var r=Math.random();this.type[t]=r<.1?"blue":"orange"},r.prototype.dead=function(t){this.alive[t]=!1},r.prototype.computeFruit=function(){for(var t=a.fruitOb,i=0,e=0;e<t.num;e++)t.alive[e]&&i++;if(i<15)return function(){for(var t=a.fruitOb,i=0;i<t.num;i++)if(!t.alive[i])return t.born(i)}(),!1},t.exports=r},function(t,i,e){function r(){this.num=5,this.x=[],this.y=[],this.r=[],this.status=[]}var a=e(0),n=a.ctx1,s=a.canWid,o=a.canHei;r.prototype.init=function(){for(var t=0;t<this.num;t++)this.x[t]=.5*s,this.y[t]=.5*o,this.status[t]=!1,this.r[t]=0},r.prototype.drawHalo=function(){n.save(),n.lineWidth=4;for(var t=0;t<this.num;t++)if(this.status[t]){if(this.r[t]+=.08*a.diffframetime,100<this.r[t])return this.status[t]=!1;var i=1-this.r[t]/100;n.strokeStyle="rgba(203, 91, 0, "+i+")",n.beginPath(),n.arc(this.x[t],this.y[t],this.r[t],0,2*Math.PI),n.stroke()}n.restore()},r.prototype.born=function(){for(var t=a.babyOb,i=0;i<this.num;i++)if(!this.status[i])return this.status[i]=!0,this.x[i]=t.x,this.y[i]=t.y,!(this.r[i]=10)},t.exports=r},function(t,i,e){function r(){this.x=0,this.y=0,this.angle,this.momTailArr=[],this.momTailTimer=0,this.momTailIndex=0,this.momEyeArr=[],this.momEyeTimer=0,this.momEyeIndex=0,this.momEyeInterval=1e3,this.momOrangeArr=[],this.momBlueArr=[],this.momBodyIndex=0}var a=e(0),n=e(2),s=a.ctx1,o=a.imgUrl,h=a.canWid,m=a.canHei,u=n.lerpAngle,d=n.lerpDistance;r.prototype.init=function(){this.x=.5*h,this.y=.5*m;for(var t=this.angle=0;t<8;t++)this.momTailArr[t]=new Image,this.momTailArr[t].src=o+"bigTail"+t+".png";for(t=0;t<2;t++)this.momEyeArr[t]=new Image,this.momEyeArr[t].src=o+"bigEye"+t+".png";for(t=0;t<8;t++)this.momOrangeArr[t]=new Image,this.momOrangeArr[t].src=o+"bigSwim"+t+".png",this.momBlueArr[t]=new Image,this.momBlueArr[t].src=o+"bigSwimBlue"+t+".png"},r.prototype.drawMom=function(){var t=a.scoreOb;this.x=d(a.mx,this.x,.96),this.y=d(a.my,this.y,.98);var i=a.mx-this.x,e=a.my-this.y,r=Math.atan2(e,i)+Math.PI;this.angle=u(r,this.angle,.6),this.momTailTimer+=a.diffframetime,50<this.momTailTimer&&(this.momTailIndex=(this.momTailIndex+1)%8,this.momTailTimer%=50),this.momEyeTimer+=a.diffframetime,this.momEyeTimer>this.momEyeInterval&&(this.momEyeIndex=(this.momEyeIndex+1)%2,this.momEyeTimer%=this.momEyeInterval,0==this.momEyeIndex?this.momEyeInterval=1500*Math.random()+1500:this.momEyeInterval=200),s.save(),s.translate(this.x,this.y),s.rotate(this.angle);var n,o=this.momTailArr[this.momTailIndex];s.drawImage(o,.5*-o.width+30,.5*-o.height),n=1!=t.doubleNum?this.momBlueArr[this.momBodyIndex]:this.momOrangeArr[this.momBodyIndex],s.drawImage(n,.5*-n.width,.5*-n.height);var h=this.momEyeArr[this.momEyeIndex];s.drawImage(h,.5*-h.width,.5*-h.height),s.restore()},t.exports=r},function(t,i,e){function r(){this.fruitNum=0,this.doubleNum=1,this.score=0,this.strength=10,this.alpha=0,this.gameOver=!1}var a=e(0),n=a.ctx1,s=a.canWid,o=a.canHei;r.prototype.init=function(){this.fruitNum=0,this.doubleNum=1,this.score=0},r.prototype.drawScore=function(){var t=a.scoreOb;n.fillText("num: "+this.fruitNum,.5*s,o-30),n.fillText("double: "+this.doubleNum,.5*s,o-70),n.save(),n.font="30px verdana",n.fillText("SCORE: "+this.score,.5*s,50),n.font="20px verdana",n.fillText("strength: ",650,45),t.strength<=3&&(n.fillStyle="red"),n.fillText(t.strength,710,45),t.gameOver&&(this.alpha+=5e-4*a.diffframetime,1<this.alpha&&(this.alpha=1),n.font="40px verdana",n.shadowBlur=10,n.shadowColor="white",n.fillStyle="rgba(255, 255, 255, "+this.alpha+")",n.fillText("GAME OVER",.5*s,.5*o-25),n.save(),n.font="25px verdana",n.fillText("CLICK TO RESTART",.5*s,.5*o+25),n.restore()),n.restore()},r.prototype.computeScore=function(){var t=a.scoreOb;t.score+=t.fruitNum*t.doubleNum,this.fruitNum=0,this.doubleNum=1},t.exports=r},function(t,i,e){function r(){this.num=10,this.x=[],this.y=[],this.r=[],this.status=[]}var a=e(0),n=a.ctx1,s=a.canWid,o=a.canHei;r.prototype.init=function(){for(var t=0;t<this.num;t++)this.x[t]=.5*s,this.y[t]=.5*o,this.status[t]=!1,this.r[t]=0},r.prototype.drawWave=function(){n.save(),n.lineWidth=3;for(var t=0;t<this.num;t++)if(this.status[t]){if(this.r[t]+=.04*a.diffframetime,60<this.r[t])return this.status[t]=!1;var i=1-this.r[t]/60;n.strokeStyle="rgba(255, 255, 255, "+i+")",n.beginPath(),n.arc(this.x[t],this.y[t],this.r[t],0,2*Math.PI),n.stroke()}n.restore()},r.prototype.born=function(t){for(var i=a.fruitOb,e=0;e<this.num;e++)if(!this.status[e])return this.status[e]=!0,this.x[e]=i.x[t],this.y[e]=i.y[t],!(this.r[e]=10)},t.exports=r},function(t,i){}]);