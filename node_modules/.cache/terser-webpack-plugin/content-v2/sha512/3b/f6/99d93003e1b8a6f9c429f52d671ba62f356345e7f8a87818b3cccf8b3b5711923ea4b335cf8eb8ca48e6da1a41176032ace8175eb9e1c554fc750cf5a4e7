{"code":"!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=1)}([function(t,e,i){i(1);var n=document.getElementById(\"canvas1\"),r=n.getContext(\"2d\"),a=document.getElementById(\"canvas2\"),o=a.getContext(\"2d\"),s={imgUrl:\"./images/\",can1:n,ctx1:r,can2:a,ctx2:o,canWid:n.width,canHei:n.height,mx:.5*n.width,my:.5*n.height,aneOb:{},fruitOb:{},momOb:{},babyOb:{},scoreOb:{},waveOb:{},haloOb:{},dustOb:{},diffframetime:0};t.exports={imgUrl:s.imgUrl,can1:s.can1,ctx1:s.ctx1,can2:s.can2,ctx2:s.ctx2,canWid:s.canWid,canHei:s.canHei,mx:s.mx,my:s.my,aneOb:s.aneOb,fruitOb:s.fruitOb,momOb:s.momOb,babyOb:s.babyOb,scoreOb:s.scoreOb,waveOb:s.waveOb,haloOb:s.haloOb,dustOb:s.dustOb,diffframetime:s.diffframetime}},function(t,e,i){var n=i(3);i(12),n.startgame()},function(t,e,i){i(1);function n(t,e,i,n){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-n,2))}function r(t,e,i){var n=e-t;return n>Math.PI&&(n-=2*Math.PI),n<-Math.PI&&(n+=2*Math.PI),t+n*i}function a(t,e,i){return t+(e-t)*i}function o(t,e,i,n,r){var a=Math.abs(t-i),o=Math.abs(e-n);return a<r&&o<r}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return window.setTimeout(t,1e3/60)};t.exports={calLength2:n,lerpAngle:r,lerpDistance:a,distance:o}},function(t,e,i){var n,r,a,o,s,h,m,u,d,c=i(0),f=i(2),l=i(4),y=i(5),b=i(6),p=i(7),x=i(8),v=i(9),g=i(10),w=i(11),I=c.can1,T=c.ctx1,O=c.ctx2,E=c.canWid,M=c.canHei,A=f.calLength2,B={startgame:function(){B.init(),d=Date.now(),B.gameLoop()},drawBackgorund:function(){var t=new Image;t.src=c.imgUrl+\"background.jpg\",O.drawImage(t,0,0,E,M)},init:function(){T.fillStyle=\"white\",T.font=\"20px 微软雅黑\",T.textAlign=\"center\",I.addEventListener(\"mousemove\",B.onMouseMove,!1),I.addEventListener(\"click\",B.onClick,!1),c.mx=.5*E,c.my=.5*M,(n=c.aneOb=new l).init(),(r=c.fruitOb=new p).init(),(a=c.momOb=new v).init(),(o=c.babyOb=new y).init(),s=c.scoreOb=new g,(h=c.waveOb=new w).init(),(m=c.haloOb=new x).init(),(u=c.dustOb=new b).init()},gameLoop:function(){requestAnimFrame(B.gameLoop);var t=Date.now();c.diffframetime=t-d,d=t,c.diffframetime>40&&(c.diffframetime=40),O.clearRect(0,0,E,M),B.drawBackgorund(),n.drawAne(),r.computeFruit(),r.drawFruit(),T.clearRect(0,0,E,M),a.drawMom(),o.drawBaby(),s.gameOver||(B.momEatFruit(),B.momFoodBaby()),s.drawScore(),h.drawWave(),m.drawHalo(),u.drawDust()},onMouseMove:function(t){s.gameOver||(t.offsetX||t.layerX)&&(c.mx=null==t.offsetX?t.layerX:t.offsetX,c.my=null==t.offsetY?t.layerY:t.offsetY)},onClick:function(){s.gameOver&&(s.gameOver=!1,r.init(),a.init(),o.init(),s.init())},momEatFruit:function(){for(var t=0;t<r.num;t++){if(r.alive[t]&&r.grow[t])A(r.x[t],r.y[t],a.x,a.y)<30&&(r.dead(t),h.born(t),s.fruitNum++,a.momBodyIndex=7==a.momBodyIndex?a.momBodyIndex:a.momBodyIndex+1,\"blue\"==r.type[t]&&s.doubleNum++)}},momFoodBaby:function(){if(s.fruitNum>0&&A(a.x,a.y,o.x,o.y)<30){m.born(),a.momBodyIndex=0;var t=s.doubleNum*s.fruitNum,e=o.babyBodyIndex-t;e<0&&(e=0);var i=s.strength+(e/2).toFixed(0);i>10&&(i=10),s.strength=i,o.babyBodyIndex=e,s.computeScore()}}};t.exports=B},function(t,e,i){var n=i(0),r=n.ctx2,a=n.canHei,o=function(){this.num=50,this.rootx=[],this.headx=[],this.heady=[],this.amp=[],this.beta=0};o.prototype.init=function(){for(var t=0;t<this.num;t++)this.rootx[t]=18*t+30*Math.random(),this.headx[t]=this.rootx[t],this.heady[t]=a-220+50*Math.random(),this.amp[t]=50*Math.random()+60},o.prototype.drawAne=function(){this.beta+=8e-4*n.diffframetime;var t=Math.sin(this.beta);r.save(),r.globalAlpha=.7,r.lineWidth=20,r.lineCap=\"round\",r.strokeStyle=\"#3b154e\";for(var e=0;e<this.num;e++){var i=this.headx[e]+t*this.amp[e];r.beginPath(),r.moveTo(this.rootx[e],a),r.quadraticCurveTo(this.rootx[e],a-100,i,this.heady[e]),r.stroke()}r.restore()},t.exports=o},function(t,e,i){var n=i(0),r=i(2),a=n.imgUrl,o=n.ctx1,s=n.can1,h=n.canWid,m=n.canHei,u=r.lerpAngle,d=r.lerpDistance,c=function(){this.x=0,this.y=0,this.angle,this.babyTailArr=[],this.babyTailTimer=0,this.babyTailIndex=0,this.babyEyeArr=[],this.babyEyeTimer=0,this.babyEyeIndex=0,this.babyEyeInterval=1e3,this.babyBodyArr=[],this.babyBodyTimer=0,this.babyBodyIndex=0};c.prototype.init=function(){this.x=.5*h-50,this.y=.5*m+50,this.babyBodyIndex=0,this.angle=0;for(var t=0;t<8;t++)this.babyTailArr[t]=new Image,this.babyTailArr[t].src=a+\"babyTail\"+t+\".png\";for(t=0;t<2;t++)this.babyEyeArr[t]=new Image,this.babyEyeArr[t].src=a+\"babyEye\"+t+\".png\";for(t=0;t<20;t++)this.babyBodyArr[t]=new Image,this.babyBodyArr[t].src=a+\"babyFade\"+t+\".png\"},c.prototype.drawBaby=function(){var t=n.momOb,e=n.scoreOb;this.x=d(t.x,this.x,.98),this.y=d(t.y,this.y,.99);var i=t.x-this.x,r=t.y-this.y,a=Math.atan2(r,i)+Math.PI;this.angle=u(a,this.angle,.6),this.babyTailTimer+=n.diffframetime,this.babyTailTimer>50&&(this.babyTailIndex=(this.babyTailIndex+1)%8,this.babyTailTimer%=50),this.babyEyeTimer+=n.diffframetime,this.babyEyeTimer>this.babyEyeInterval&&(this.babyEyeIndex=(this.babyEyeIndex+1)%2,this.babyEyeTimer%=this.babyEyeInterval,0==this.babyEyeIndex?this.babyEyeInterval=1500*Math.random()+1500:this.babyEyeInterval=200),this.babyBodyTimer+=n.diffframetime,this.babyBodyTimer>550&&(this.babyBodyIndex+=1,this.babyBodyTimer%=550,e.strength=((20-this.babyBodyIndex)/2).toFixed(0),this.babyBodyIndex>19&&(this.babyBodyIndex=19,e.gameOver=!0,s.style.cursor=\"pointer\")),o.save(),o.translate(this.x,this.y),o.rotate(this.angle);var h=this.babyTailArr[this.babyTailIndex];o.drawImage(h,.5*-h.width+24,.5*-h.height);var m=this.babyBodyArr[this.babyBodyIndex];o.drawImage(m,.5*-m.width,.5*-m.height);var c=this.babyEyeArr[this.babyEyeIndex];o.drawImage(c,.5*-c.width,.5*-c.height),o.restore()},t.exports=c},function(t,e,i){var n=i(0),r=n.ctx1,a=n.imgUrl,o=n.canWid,s=n.canHei,h=function(){this.num=30,this.dustPic=[],this.x=[],this.y=[],this.amp=[],this.index=[],this.beta=0};h.prototype.init=function(){for(var t=0;t<7;t++)this.dustPic[t]=new Image,this.dustPic[t].src=a+\"dust\"+t+\".png\";for(t=0;t<this.num;t++)this.x[t]=Math.random()*o,this.y[t]=Math.random()*s,this.amp=20+Math.random()+15,this.index[t]=Math.floor(7*Math.random())},h.prototype.drawDust=function(){for(var t=0;t<this.num;t++){var e=this.index[t];r.drawImage(this.dustPic[e],this.x,this.y)}},t.exports=h},function(t,e,i){var n=i(0),r=n.ctx2,a=n.imgUrl,o=function(){this.num=30,this.x=[],this.y=[],this.size=[],this.type=[],this.speed=[],this.grow=[],this.alive=[],this.orange=new Image,this.blue=new Image};o.prototype.init=function(){this.orange.src=a+\"fruit.png\",this.blue.src=a+\"blue.png\";for(var t=0;t<this.num;t++)this.x[t]=this.y[t]=0,this.speed[t]=.015*Math.random()+.005,this.alive[t]=!1,this.grow[t]=!1,this.type[t]=\"\"},o.prototype.drawFruit=function(){for(var t=0;t<this.num;t++)if(this.alive[t]){this.size[t]<=16?(this.grow[t]=!1,this.size[t]+=this.speed[t]*n.diffframetime*.8):(this.grow[t]=!0,this.y[t]-=5*this.speed[t]*n.diffframetime);var e=this.orange;\"blue\"==this.type[t]&&(e=this.blue),r.drawImage(e,this.x[t]-.5*this.size[t],this.y[t]-.5*this.size[t],this.size[t],this.size[t]),this.y[t]<8&&(this.alive[t]=!1)}},o.prototype.born=function(t){var e=n.aneOb,i=Math.floor(Math.random()*e.num);this.x[t]=e.headx[i],this.y[t]=e.heady[i],this.size[t]=0,this.alive[t]=!0;var r=Math.random();this.type[t]=r<.1?\"blue\":\"orange\"},o.prototype.dead=function(t){this.alive[t]=!1},o.prototype.computeFruit=function(){for(var t=n.fruitOb,e=0,i=0;i<t.num;i++)t.alive[i]&&e++;if(e<15)return function(){for(var t=n.fruitOb,e=0;e<t.num;e++)if(!t.alive[e])return t.born(e),!1}(),!1},t.exports=o},function(t,e,i){var n=i(0),r=n.ctx1,a=n.canWid,o=n.canHei,s=function(){this.num=5,this.x=[],this.y=[],this.r=[],this.status=[]};s.prototype.init=function(){for(var t=0;t<this.num;t++)this.x[t]=.5*a,this.y[t]=.5*o,this.status[t]=!1,this.r[t]=0},s.prototype.drawHalo=function(){r.save(),r.lineWidth=4;for(var t=0;t<this.num;t++)if(this.status[t]){if(this.r[t]+=.08*n.diffframetime,this.r[t]>100)return this.status[t]=!1,!1;var e=1-this.r[t]/100;r.strokeStyle=\"rgba(203, 91, 0, \"+e+\")\",r.beginPath(),r.arc(this.x[t],this.y[t],this.r[t],0,2*Math.PI),r.stroke()}r.restore()},s.prototype.born=function(){for(var t=n.babyOb,e=0;e<this.num;e++)if(!this.status[e])return this.status[e]=!0,this.x[e]=t.x,this.y[e]=t.y,this.r[e]=10,!1},t.exports=s},function(t,e,i){var n=i(0),r=i(2),a=n.ctx1,o=n.imgUrl,s=n.canWid,h=n.canHei,m=r.lerpAngle,u=r.lerpDistance,d=function(){this.x=0,this.y=0,this.angle,this.momTailArr=[],this.momTailTimer=0,this.momTailIndex=0,this.momEyeArr=[],this.momEyeTimer=0,this.momEyeIndex=0,this.momEyeInterval=1e3,this.momOrangeArr=[],this.momBlueArr=[],this.momBodyIndex=0};d.prototype.init=function(){this.x=.5*s,this.y=.5*h,this.angle=0;for(var t=0;t<8;t++)this.momTailArr[t]=new Image,this.momTailArr[t].src=o+\"bigTail\"+t+\".png\";for(t=0;t<2;t++)this.momEyeArr[t]=new Image,this.momEyeArr[t].src=o+\"bigEye\"+t+\".png\";for(t=0;t<8;t++)this.momOrangeArr[t]=new Image,this.momOrangeArr[t].src=o+\"bigSwim\"+t+\".png\",this.momBlueArr[t]=new Image,this.momBlueArr[t].src=o+\"bigSwimBlue\"+t+\".png\"},d.prototype.drawMom=function(){var t=n.scoreOb;this.x=u(n.mx,this.x,.96),this.y=u(n.my,this.y,.98);var e=n.mx-this.x,i=n.my-this.y,r=Math.atan2(i,e)+Math.PI;this.angle=m(r,this.angle,.6),this.momTailTimer+=n.diffframetime,this.momTailTimer>50&&(this.momTailIndex=(this.momTailIndex+1)%8,this.momTailTimer%=50),this.momEyeTimer+=n.diffframetime,this.momEyeTimer>this.momEyeInterval&&(this.momEyeIndex=(this.momEyeIndex+1)%2,this.momEyeTimer%=this.momEyeInterval,0==this.momEyeIndex?this.momEyeInterval=1500*Math.random()+1500:this.momEyeInterval=200),a.save(),a.translate(this.x,this.y),a.rotate(this.angle);var o,s=this.momTailArr[this.momTailIndex];a.drawImage(s,.5*-s.width+30,.5*-s.height),o=1!=t.doubleNum?this.momBlueArr[this.momBodyIndex]:this.momOrangeArr[this.momBodyIndex],a.drawImage(o,.5*-o.width,.5*-o.height);var h=this.momEyeArr[this.momEyeIndex];a.drawImage(h,.5*-h.width,.5*-h.height),a.restore()},t.exports=d},function(t,e,i){var n=i(0),r=n.ctx1,a=n.canWid,o=n.canHei,s=function(){this.fruitNum=0,this.doubleNum=1,this.score=0,this.strength=10,this.alpha=0,this.gameOver=!1};s.prototype.init=function(){this.fruitNum=0,this.doubleNum=1,this.score=0},s.prototype.drawScore=function(){var t=n.scoreOb;r.fillText(\"num: \"+this.fruitNum,.5*a,o-30),r.fillText(\"double: \"+this.doubleNum,.5*a,o-70),r.save(),r.font=\"30px verdana\",r.fillText(\"SCORE: \"+this.score,.5*a,50),r.font=\"20px verdana\",r.fillText(\"strength: \",650,45),t.strength<=3&&(r.fillStyle=\"red\"),r.fillText(t.strength,710,45),t.gameOver&&(this.alpha+=5e-4*n.diffframetime,this.alpha>1&&(this.alpha=1),r.font=\"40px verdana\",r.shadowBlur=10,r.shadowColor=\"white\",r.fillStyle=\"rgba(255, 255, 255, \"+this.alpha+\")\",r.fillText(\"GAME OVER\",.5*a,.5*o-25),r.save(),r.font=\"25px verdana\",r.fillText(\"CLICK TO RESTART\",.5*a,.5*o+25),r.restore()),r.restore()},s.prototype.computeScore=function(){var t=n.scoreOb;t.score+=t.fruitNum*t.doubleNum,this.fruitNum=0,this.doubleNum=1},t.exports=s},function(t,e,i){var n=i(0),r=n.ctx1,a=n.canWid,o=n.canHei,s=function(){this.num=10,this.x=[],this.y=[],this.r=[],this.status=[]};s.prototype.init=function(){for(var t=0;t<this.num;t++)this.x[t]=.5*a,this.y[t]=.5*o,this.status[t]=!1,this.r[t]=0},s.prototype.drawWave=function(){r.save(),r.lineWidth=3;for(var t=0;t<this.num;t++)if(this.status[t]){if(this.r[t]+=.04*n.diffframetime,this.r[t]>60)return this.status[t]=!1,!1;var e=1-this.r[t]/60;r.strokeStyle=\"rgba(255, 255, 255, \"+e+\")\",r.beginPath(),r.arc(this.x[t],this.y[t],this.r[t],0,2*Math.PI),r.stroke()}r.restore()},s.prototype.born=function(t){for(var e=n.fruitOb,i=0;i<this.num;i++)if(!this.status[i])return this.status[i]=!0,this.x[i]=e.x[t],this.y[i]=e.y[t],this.r[i]=10,!1},t.exports=s},function(t,e,i){var n=i(13);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]);var r={insert:\"head\",singleton:!1};i(15)(n,r);n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(14)(!1)).push([t.i,\"body,ul,p,h1,h2,h3,h4,dl,dd,form,input,textarea,select{padding:0;margin:0;font-family:arial;font-size:12px;}\\nli{list-style:none;}\\nimg,input{border:none;}\\na{text-decoration:none;}\\na:hover{text-decoration:underline;}\\n\\n.introduce{width:800px;height:100px;margin:0 auto;padding-top: 10px;}\\n.introduce p.title{width:800px;font-size: 16px;font-weight: bold;text-align: center;}\\n.introduce ul{width: 800px;margin:6px 0;}\\n.introduce ul li{width: 800px;height: 20px;line-height: 20px;}\\n\\n.page{width: 800px;height: 600px;margin: 0px auto;margin-top: 6px;}\\n#main{width: 800px;height: 600px;position: relative;}\\n#canvas1, #canvas2 {width: 800px;height: 600px;position: absolute;left: 0;top: 0;}\\n#canvas1{z-index: 1;}\\n#canvas2{z-index: 0;}\\n\",\"\"])},function(t,e,i){\"use strict\";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||\"\",n=t[3];if(!n)return i;if(e&&\"function\"==typeof btoa){var r=(o=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),h=\"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(s),\"/*# \".concat(h,\" */\")),a=n.sources.map(function(t){return\"/*# sourceURL=\".concat(n.sourceRoot).concat(t,\" */\")});return[i].concat(a).concat([r]).join(\"\\n\")}var o,s,h;return[i].join(\"\\n\")}(e,t);return e[2]?\"@media \".concat(e[2],\"{\").concat(i,\"}\"):i}).join(\"\")},e.i=function(t,i){\"string\"==typeof t&&(t=[[null,t,\"\"]]);for(var n={},r=0;r<this.length;r++){var a=this[r][0];null!=a&&(n[a]=!0)}for(var o=0;o<t.length;o++){var s=t[o];null!=s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]=\"(\".concat(s[2],\") and (\").concat(i,\")\")),e.push(s))}},e}},function(t,e,i){\"use strict\";var n,r={},a=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}();function s(t,e){for(var i=[],n={},r=0;r<t.length;r++){var a=t[r],o=e.base?a[0]+e.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};n[o]?n[o].parts.push(s):i.push(n[o]={id:o,parts:[s]})}return i}function h(t,e){for(var i=0;i<t.length;i++){var n=t[i],a=r[n.id],o=0;if(a){for(a.refs++;o<a.parts.length;o++)a.parts[o](n.parts[o]);for(;o<n.parts.length;o++)a.parts.push(y(n.parts[o],e))}else{for(var s=[];o<n.parts.length;o++)s.push(y(n.parts[o],e));r[n.id]={id:n.id,refs:1,parts:s}}}}function m(t){var e=document.createElement(\"style\");if(void 0===t.attributes.nonce){var n=i.nc;n&&(t.attributes.nonce=n)}if(Object.keys(t.attributes).forEach(function(i){e.setAttribute(i,t.attributes[i])}),\"function\"==typeof t.insert)t.insert(e);else{var r=o(t.insert||\"head\");if(!r)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");r.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join(\"\\n\")});function c(t,e,i,n){var r=i?\"\":n.css;if(t.styleSheet)t.styleSheet.cssText=d(e,r);else{var a=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}var f=null,l=0;function y(t,e){var i,n,r;if(e.singleton){var a=l++;i=f||(f=m(e)),n=c.bind(null,i,a,!1),r=c.bind(null,i,a,!0)}else i=m(e),n=function(t,e,i){var n=i.css,r=i.media,a=i.sourceMap;if(r&&t.setAttribute(\"media\",r),a&&btoa&&(n+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a)))),\" */\")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,i,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).attributes=\"object\"==typeof e.attributes?e.attributes:{},e.singleton||\"boolean\"==typeof e.singleton||(e.singleton=a());var i=s(t,e);return h(i,e),function(t){for(var n=[],a=0;a<i.length;a++){var o=i[a],m=r[o.id];m&&(m.refs--,n.push(m))}t&&h(s(t,e),e);for(var u=0;u<n.length;u++){var d=n[u];if(0===d.refs){for(var c=0;c<d.parts.length;c++)d.parts[c]();delete r[d.id]}}}}}]);","extractedComments":[]}