{"code":"!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=1)}([function(t,e,i){i(1);var n=document.getElementById(\"canvas1\"),r=n.getContext(\"2d\"),a=document.getElementById(\"canvas2\"),o=a.getContext(\"2d\"),s={imgUrl:\"./images/\",can1:n,ctx1:r,can2:a,ctx2:o,canWid:n.width,canHei:n.height,mx:.5*n.width,my:.5*n.height,aneOb:{},fruitOb:{},momOb:{},babyOb:{},scoreOb:{},waveOb:{},haloOb:{},dustOb:{},diffframetime:0};t.exports={imgUrl:s.imgUrl,can1:s.can1,ctx1:s.ctx1,can2:s.can2,ctx2:s.ctx2,canWid:s.canWid,canHei:s.canHei,mx:s.mx,my:s.my,aneOb:s.aneOb,fruitOb:s.fruitOb,momOb:s.momOb,babyOb:s.babyOb,scoreOb:s.scoreOb,waveOb:s.waveOb,haloOb:s.haloOb,dustOb:s.dustOb,diffframetime:s.diffframetime}},function(t,e,i){var n=i(3);i(12),n.startgame()},function(t,e,i){i(1),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return window.setTimeout(t,1e3/60)},t.exports={calLength2:function(t,e,i,n){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-n,2))},lerpAngle:function(t,e,i){var n=e-t;return n>Math.PI&&(n-=2*Math.PI),n<-Math.PI&&(n+=2*Math.PI),t+n*i},lerpDistance:function(t,e,i){return t+(e-t)*i},distance:function(t,e,i,n,r){var a=Math.abs(t-i),o=Math.abs(e-n);return a<r&&o<r}}},function(t,e,i){var n,r,a,o,s,h,m,u,d,c=i(0),f=i(2),l=i(4),y=i(5),b=i(6),p=i(7),x=i(8),g=i(9),v=i(10),w=i(11),I=c.can1,T=c.ctx1,O=c.ctx2,E=c.canWid,M=c.canHei,A=f.calLength2,B={startgame:function(){B.init(),d=Date.now(),B.gameLoop()},drawBackgorund:function(){var t=new Image;t.src=c.imgUrl+\"background.jpg\",O.drawImage(t,0,0,E,M)},init:function(){T.fillStyle=\"white\",T.font=\"20px 微软雅黑\",T.textAlign=\"center\",I.addEventListener(\"mousemove\",B.onMouseMove,!1),I.addEventListener(\"click\",B.onClick,!1),c.mx=.5*E,c.my=.5*M,(n=c.aneOb=new l).init(),(r=c.fruitOb=new p).init(),(a=c.momOb=new g).init(),(o=c.babyOb=new y).init(),s=c.scoreOb=new v,(h=c.waveOb=new w).init(),(m=c.haloOb=new x).init(),(u=c.dustOb=new b).init()},gameLoop:function(){requestAnimFrame(B.gameLoop);var t=Date.now();c.diffframetime=t-d,d=t,40<c.diffframetime&&(c.diffframetime=40),O.clearRect(0,0,E,M),B.drawBackgorund(),n.drawAne(),r.computeFruit(),r.drawFruit(),T.clearRect(0,0,E,M),a.drawMom(),o.drawBaby(),s.gameOver||(B.momEatFruit(),B.momFoodBaby()),s.drawScore(),h.drawWave(),m.drawHalo(),u.drawDust()},onMouseMove:function(t){s.gameOver||(t.offsetX||t.layerX)&&(c.mx=null==t.offsetX?t.layerX:t.offsetX,c.my=null==t.offsetY?t.layerY:t.offsetY)},onClick:function(){s.gameOver&&(s.gameOver=!1,r.init(),a.init(),o.init(),s.init())},momEatFruit:function(){for(var t=0;t<r.num;t++)r.alive[t]&&r.grow[t]&&A(r.x[t],r.y[t],a.x,a.y)<30&&(r.dead(t),h.born(t),s.fruitNum++,a.momBodyIndex=7==a.momBodyIndex?a.momBodyIndex:a.momBodyIndex+1,\"blue\"==r.type[t]&&s.doubleNum++)},momFoodBaby:function(){if(0<s.fruitNum&&A(a.x,a.y,o.x,o.y)<30){m.born(),a.momBodyIndex=0;var t=s.doubleNum*s.fruitNum,e=o.babyBodyIndex-t;e<0&&(e=0);var i=s.strength+(e/2).toFixed(0);10<i&&(i=10),s.strength=i,o.babyBodyIndex=e,s.computeScore()}}};t.exports=B},function(t,e,i){function n(){this.num=50,this.rootx=[],this.headx=[],this.heady=[],this.amp=[],this.beta=0}var r=i(0),a=r.ctx2,o=r.canHei;n.prototype.init=function(){for(var t=0;t<this.num;t++)this.rootx[t]=18*t+30*Math.random(),this.headx[t]=this.rootx[t],this.heady[t]=o-220+50*Math.random(),this.amp[t]=50*Math.random()+60},n.prototype.drawAne=function(){this.beta+=8e-4*r.diffframetime;var t=Math.sin(this.beta);a.save(),a.globalAlpha=.7,a.lineWidth=20,a.lineCap=\"round\",a.strokeStyle=\"#3b154e\";for(var e=0;e<this.num;e++){var i=this.headx[e]+t*this.amp[e];a.beginPath(),a.moveTo(this.rootx[e],o),a.quadraticCurveTo(this.rootx[e],o-100,i,this.heady[e]),a.stroke()}a.restore()},t.exports=n},function(t,e,i){function n(){this.x=0,this.y=0,this.angle,this.babyTailArr=[],this.babyTailTimer=0,this.babyTailIndex=0,this.babyEyeArr=[],this.babyEyeTimer=0,this.babyEyeIndex=0,this.babyEyeInterval=1e3,this.babyBodyArr=[],this.babyBodyTimer=0,this.babyBodyIndex=0}var r=i(0),a=i(2),o=r.imgUrl,s=r.ctx1,h=r.can1,m=r.canWid,u=r.canHei,d=a.lerpAngle,c=a.lerpDistance;n.prototype.init=function(){this.x=.5*m-50,this.y=.5*u+50,this.babyBodyIndex=0;for(var t=this.angle=0;t<8;t++)this.babyTailArr[t]=new Image,this.babyTailArr[t].src=o+\"babyTail\"+t+\".png\";for(t=0;t<2;t++)this.babyEyeArr[t]=new Image,this.babyEyeArr[t].src=o+\"babyEye\"+t+\".png\";for(t=0;t<20;t++)this.babyBodyArr[t]=new Image,this.babyBodyArr[t].src=o+\"babyFade\"+t+\".png\"},n.prototype.drawBaby=function(){var t=r.momOb,e=r.scoreOb;this.x=c(t.x,this.x,.98),this.y=c(t.y,this.y,.99);var i=t.x-this.x,n=t.y-this.y,a=Math.atan2(n,i)+Math.PI;this.angle=d(a,this.angle,.6),this.babyTailTimer+=r.diffframetime,50<this.babyTailTimer&&(this.babyTailIndex=(this.babyTailIndex+1)%8,this.babyTailTimer%=50),this.babyEyeTimer+=r.diffframetime,this.babyEyeTimer>this.babyEyeInterval&&(this.babyEyeIndex=(this.babyEyeIndex+1)%2,this.babyEyeTimer%=this.babyEyeInterval,0==this.babyEyeIndex?this.babyEyeInterval=1500*Math.random()+1500:this.babyEyeInterval=200),this.babyBodyTimer+=r.diffframetime,550<this.babyBodyTimer&&(this.babyBodyIndex+=1,this.babyBodyTimer%=550,e.strength=((20-this.babyBodyIndex)/2).toFixed(0),19<this.babyBodyIndex&&(this.babyBodyIndex=19,e.gameOver=!0,h.style.cursor=\"pointer\")),s.save(),s.translate(this.x,this.y),s.rotate(this.angle);var o=this.babyTailArr[this.babyTailIndex];s.drawImage(o,.5*-o.width+24,.5*-o.height);var m=this.babyBodyArr[this.babyBodyIndex];s.drawImage(m,.5*-m.width,.5*-m.height);var u=this.babyEyeArr[this.babyEyeIndex];s.drawImage(u,.5*-u.width,.5*-u.height),s.restore()},t.exports=n},function(t,e,i){function n(){this.num=30,this.dustPic=[],this.x=[],this.y=[],this.amp=[],this.index=[],this.beta=0}var r=i(0),a=r.ctx1,o=r.imgUrl,s=r.canWid,h=r.canHei;n.prototype.init=function(){for(var t=0;t<7;t++)this.dustPic[t]=new Image,this.dustPic[t].src=o+\"dust\"+t+\".png\";for(t=0;t<this.num;t++)this.x[t]=Math.random()*s,this.y[t]=Math.random()*h,this.amp=20+Math.random()+15,this.index[t]=Math.floor(7*Math.random())},n.prototype.drawDust=function(){for(var t=0;t<this.num;t++){var e=this.index[t];a.drawImage(this.dustPic[e],this.x,this.y)}},t.exports=n},function(t,e,i){function n(){this.num=30,this.x=[],this.y=[],this.size=[],this.type=[],this.speed=[],this.grow=[],this.alive=[],this.orange=new Image,this.blue=new Image}var r=i(0),a=r.ctx2,o=r.imgUrl;n.prototype.init=function(){this.orange.src=o+\"fruit.png\",this.blue.src=o+\"blue.png\";for(var t=0;t<this.num;t++)this.x[t]=this.y[t]=0,this.speed[t]=.015*Math.random()+.005,this.alive[t]=!1,this.grow[t]=!1,this.type[t]=\"\"},n.prototype.drawFruit=function(){for(var t=0;t<this.num;t++)if(this.alive[t]){this.size[t]<=16?(this.grow[t]=!1,this.size[t]+=this.speed[t]*r.diffframetime*.8):(this.grow[t]=!0,this.y[t]-=5*this.speed[t]*r.diffframetime);var e=this.orange;\"blue\"==this.type[t]&&(e=this.blue),a.drawImage(e,this.x[t]-.5*this.size[t],this.y[t]-.5*this.size[t],this.size[t],this.size[t]),this.y[t]<8&&(this.alive[t]=!1)}},n.prototype.born=function(t){var e=r.aneOb,i=Math.floor(Math.random()*e.num);this.x[t]=e.headx[i],this.y[t]=e.heady[i],this.size[t]=0,this.alive[t]=!0;var n=Math.random();this.type[t]=n<.1?\"blue\":\"orange\"},n.prototype.dead=function(t){this.alive[t]=!1},n.prototype.computeFruit=function(){for(var t=r.fruitOb,e=0,i=0;i<t.num;i++)t.alive[i]&&e++;if(e<15)return function(){for(var t=r.fruitOb,e=0;e<t.num;e++)if(!t.alive[e])return t.born(e)}(),!1},t.exports=n},function(t,e,i){function n(){this.num=5,this.x=[],this.y=[],this.r=[],this.status=[]}var r=i(0),a=r.ctx1,o=r.canWid,s=r.canHei;n.prototype.init=function(){for(var t=0;t<this.num;t++)this.x[t]=.5*o,this.y[t]=.5*s,this.status[t]=!1,this.r[t]=0},n.prototype.drawHalo=function(){a.save(),a.lineWidth=4;for(var t=0;t<this.num;t++)if(this.status[t]){if(this.r[t]+=.08*r.diffframetime,100<this.r[t])return this.status[t]=!1;var e=1-this.r[t]/100;a.strokeStyle=\"rgba(203, 91, 0, \"+e+\")\",a.beginPath(),a.arc(this.x[t],this.y[t],this.r[t],0,2*Math.PI),a.stroke()}a.restore()},n.prototype.born=function(){for(var t=r.babyOb,e=0;e<this.num;e++)if(!this.status[e])return this.status[e]=!0,this.x[e]=t.x,this.y[e]=t.y,!(this.r[e]=10)},t.exports=n},function(t,e,i){function n(){this.x=0,this.y=0,this.angle,this.momTailArr=[],this.momTailTimer=0,this.momTailIndex=0,this.momEyeArr=[],this.momEyeTimer=0,this.momEyeIndex=0,this.momEyeInterval=1e3,this.momOrangeArr=[],this.momBlueArr=[],this.momBodyIndex=0}var r=i(0),a=i(2),o=r.ctx1,s=r.imgUrl,h=r.canWid,m=r.canHei,u=a.lerpAngle,d=a.lerpDistance;n.prototype.init=function(){this.x=.5*h,this.y=.5*m;for(var t=this.angle=0;t<8;t++)this.momTailArr[t]=new Image,this.momTailArr[t].src=s+\"bigTail\"+t+\".png\";for(t=0;t<2;t++)this.momEyeArr[t]=new Image,this.momEyeArr[t].src=s+\"bigEye\"+t+\".png\";for(t=0;t<8;t++)this.momOrangeArr[t]=new Image,this.momOrangeArr[t].src=s+\"bigSwim\"+t+\".png\",this.momBlueArr[t]=new Image,this.momBlueArr[t].src=s+\"bigSwimBlue\"+t+\".png\"},n.prototype.drawMom=function(){var t=r.scoreOb;this.x=d(r.mx,this.x,.96),this.y=d(r.my,this.y,.98);var e=r.mx-this.x,i=r.my-this.y,n=Math.atan2(i,e)+Math.PI;this.angle=u(n,this.angle,.6),this.momTailTimer+=r.diffframetime,50<this.momTailTimer&&(this.momTailIndex=(this.momTailIndex+1)%8,this.momTailTimer%=50),this.momEyeTimer+=r.diffframetime,this.momEyeTimer>this.momEyeInterval&&(this.momEyeIndex=(this.momEyeIndex+1)%2,this.momEyeTimer%=this.momEyeInterval,0==this.momEyeIndex?this.momEyeInterval=1500*Math.random()+1500:this.momEyeInterval=200),o.save(),o.translate(this.x,this.y),o.rotate(this.angle);var a,s=this.momTailArr[this.momTailIndex];o.drawImage(s,.5*-s.width+30,.5*-s.height),a=1!=t.doubleNum?this.momBlueArr[this.momBodyIndex]:this.momOrangeArr[this.momBodyIndex],o.drawImage(a,.5*-a.width,.5*-a.height);var h=this.momEyeArr[this.momEyeIndex];o.drawImage(h,.5*-h.width,.5*-h.height),o.restore()},t.exports=n},function(t,e,i){function n(){this.fruitNum=0,this.doubleNum=1,this.score=0,this.strength=10,this.alpha=0,this.gameOver=!1}var r=i(0),a=r.ctx1,o=r.canWid,s=r.canHei;n.prototype.init=function(){this.fruitNum=0,this.doubleNum=1,this.score=0},n.prototype.drawScore=function(){var t=r.scoreOb;a.fillText(\"num: \"+this.fruitNum,.5*o,s-30),a.fillText(\"double: \"+this.doubleNum,.5*o,s-70),a.save(),a.font=\"30px verdana\",a.fillText(\"SCORE: \"+this.score,.5*o,50),a.font=\"20px verdana\",a.fillText(\"strength: \",650,45),t.strength<=3&&(a.fillStyle=\"red\"),a.fillText(t.strength,710,45),t.gameOver&&(this.alpha+=5e-4*r.diffframetime,1<this.alpha&&(this.alpha=1),a.font=\"40px verdana\",a.shadowBlur=10,a.shadowColor=\"white\",a.fillStyle=\"rgba(255, 255, 255, \"+this.alpha+\")\",a.fillText(\"GAME OVER\",.5*o,.5*s-25),a.save(),a.font=\"25px verdana\",a.fillText(\"CLICK TO RESTART\",.5*o,.5*s+25),a.restore()),a.restore()},n.prototype.computeScore=function(){var t=r.scoreOb;t.score+=t.fruitNum*t.doubleNum,this.fruitNum=0,this.doubleNum=1},t.exports=n},function(t,e,i){function n(){this.num=10,this.x=[],this.y=[],this.r=[],this.status=[]}var r=i(0),a=r.ctx1,o=r.canWid,s=r.canHei;n.prototype.init=function(){for(var t=0;t<this.num;t++)this.x[t]=.5*o,this.y[t]=.5*s,this.status[t]=!1,this.r[t]=0},n.prototype.drawWave=function(){a.save(),a.lineWidth=3;for(var t=0;t<this.num;t++)if(this.status[t]){if(this.r[t]+=.04*r.diffframetime,60<this.r[t])return this.status[t]=!1;var e=1-this.r[t]/60;a.strokeStyle=\"rgba(255, 255, 255, \"+e+\")\",a.beginPath(),a.arc(this.x[t],this.y[t],this.r[t],0,2*Math.PI),a.stroke()}a.restore()},n.prototype.born=function(t){for(var e=r.fruitOb,i=0;i<this.num;i++)if(!this.status[i])return this.status[i]=!0,this.x[i]=e.x[t],this.y[i]=e.y[t],!(this.r[i]=10)},t.exports=n},function(t,e,i){var n=i(13);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]);i(15)(n,{insert:\"head\",singleton:!1}),n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(14)(!1)).push([t.i,\"body,ul,p,h1,h2,h3,h4,dl,dd,form,input,textarea,select{padding:0;margin:0;font-family:arial;font-size:12px;}\\nli{list-style:none;}\\nimg,input{border:none;}\\na{text-decoration:none;}\\na:hover{text-decoration:underline;}\\n\\n.introduce{width:800px;height:100px;margin:0 auto;padding-top: 10px;}\\n.introduce p.title{width:800px;font-size: 16px;font-weight: bold;text-align: center;}\\n.introduce ul{width: 800px;margin:6px 0;}\\n.introduce ul li{width: 800px;height: 20px;line-height: 20px;}\\n\\n.page{width: 800px;height: 600px;margin: 0px auto;margin-top: 6px;}\\n#main{width: 800px;height: 600px;position: relative;}\\n#canvas1, #canvas2 {width: 800px;height: 600px;position: absolute;left: 0;top: 0;}\\n#canvas1{z-index: 1;}\\n#canvas2{z-index: 0;}\\n\",\"\"])},function(t,e,i){\"use strict\";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||\"\",n=t[3];if(!n)return i;if(e&&\"function\"==typeof btoa){var r=function(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),i=\"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(e);return\"/*# \".concat(i,\" */\")}(n),a=n.sources.map(function(t){return\"/*# sourceURL=\".concat(n.sourceRoot).concat(t,\" */\")});return[i].concat(a).concat([r]).join(\"\\n\")}return[i].join(\"\\n\")}(e,t);return e[2]?\"@media \".concat(e[2],\"{\").concat(i,\"}\"):i}).join(\"\")},e.i=function(t,i){\"string\"==typeof t&&(t=[[null,t,\"\"]]);for(var n={},r=0;r<this.length;r++){var a=this[r][0];null!=a&&(n[a]=!0)}for(var o=0;o<t.length;o++){var s=t[o];null!=s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]=\"(\".concat(s[2],\") and (\").concat(i,\")\")),e.push(s))}},e}},function(t,e,i){\"use strict\";var n,r,a={},o=(r={},function(t){if(void 0===r[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}r[t]=e}return r[t]});function s(t,e){for(var i=[],n={},r=0;r<t.length;r++){var a=t[r],o=e.base?a[0]+e.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};n[o]?n[o].parts.push(s):i.push(n[o]={id:o,parts:[s]})}return i}function h(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=a[n.id],o=0;if(r){for(r.refs++;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(y(n.parts[o],e))}else{for(var s=[];o<n.parts.length;o++)s.push(y(n.parts[o],e));a[n.id]={id:n.id,refs:1,parts:s}}}}function m(t){var e=document.createElement(\"style\");if(void 0===t.attributes.nonce){var n=i.nc;n&&(t.attributes.nonce=n)}if(Object.keys(t.attributes).forEach(function(i){e.setAttribute(i,t.attributes[i])}),\"function\"==typeof t.insert)t.insert(e);else{var r=o(t.insert||\"head\");if(!r)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");r.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join(\"\\n\")});function c(t,e,i,n){var r=i?\"\":n.css;if(t.styleSheet)t.styleSheet.cssText=d(e,r);else{var a=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}var f=null,l=0;function y(t,e){var i,n,r;if(e.singleton){var a=l++;i=f=f||m(e),n=c.bind(null,i,a,!1),r=c.bind(null,i,a,!0)}else i=m(e),n=function(t,e,i){var n=i.css,r=i.media,a=i.sourceMap;if(r&&t.setAttribute(\"media\",r),a&&btoa&&(n+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a)))),\" */\")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,i,e),r=function(){!function(t){null!==t.parentNode&&t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).attributes=\"object\"==typeof e.attributes?e.attributes:{},e.singleton||\"boolean\"==typeof e.singleton||(e.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var i=s(t,e);return h(i,e),function(t){for(var n=[],r=0;r<i.length;r++){var o=i[r],m=a[o.id];m&&(m.refs--,n.push(m))}t&&h(s(t,e),e);for(var u=0;u<n.length;u++){var d=n[u];if(0===d.refs){for(var c=0;c<d.parts.length;c++)d.parts[c]();delete a[d.id]}}}}}]);","extractedComments":[]}